# 下载和编辑网络

在本文中，我们将向您介绍如何下载和编辑网络。

## 下载交通网络

首先，我们需要打开交通网络下载器。

<!-- tabs:start -->
# **命令行**
运行以下命令打开交通网络下载器：
```
v2sim-osm
```

# **图形用户界面**
您可以在欢迎页面点击链接“从OSM下载...”来打开交通网络下载器。

![欢迎界面](../imgs/0.png)

<!-- tabs:end -->

运行此脚本后，您的浏览器将会被打开并显示一张地图。

> **注意：** 此程序基于 OpenStreetMap。由于网络限制，**中国大陆用户**可能无法访问 OpenStreetMap。

![示例图片](../imgs/1.png)

现在，在地图上选择您想要下载的区域。以下是一些有用的提示：

+ 您可以输入城市名称并点击`搜索`跳转到该位置，或者输入纬度和经度并点击`前往`。由于网络和现代浏览器的限制，`使用当前位置`功能可能无法使用。
+ 默认情况下，将下载您屏幕上显示的整个地图区域。您可以勾选复选框`选择区域`来仅选择一个矩形区域。
+ 您可以根据偏好调整`选项`中的项目。
  - 推荐勾选`添加多边形`，因为多边形用于电动汽车充电站和出行生成。
  - 推荐勾选`仅限汽车通行网络`，因为 V2Sim 不模拟除车辆外的其他对象。
+ 在第二个选项卡中，默认仅勾选了`公路`。不推荐勾选其他选项，因为 V2Sim 不会模拟它们的运动。
+ 完成配置后，点击`生成场景`按钮。案例将生成在 `cases` 文件夹中。

默认情况下，会生成两个案例，一个用于 SUMO，一个用于 UXsim。案例文件夹名称格式为 `前缀_时间`，例如 `sumo_20260101_120000` 和 `ux_20260101_120000`。生成后 V2Sim 图形用户界面将自动打开。如果生成的案例未被自动选中，请点击`添加项目...`链接，选择您创建的文件夹，然后打开它。您将看到类似这样的界面：<br> ![示例图片](../imgs/3.png)

## 将 SUMO 网络转换为 UXsim 网络
在早期版本中，下载的交通网络仅用于 SUMO。但是，如果我们想使用 UXsim 作为交通仿真器，则需要转换案例。

1. 运行以下命令打开 GUI，然后点击 `Convert case...`：

![alt text](../imgs/2.png)

2. 选择输入案例文件夹和输出文件夹，然后点击 `Convert`：

![alt text](../imgs/2.1.png)

### 编辑交通网络
<!-- tabs:start -->
# **SUMO 案例**
V2Sim GUI 中无法编辑道路网络。请使用 SUMO NetEdit，通过命令 `netedit`。在 NetEdit 中，打开 `.net.xml` 或 `.net.xml.gz` 文件来编辑道路网络。

# **UXsim 案例**
您可以直接在 V2Sim-UX GUI 中拖动道路网络元素来编辑它们。操作与下一节介绍的编辑配电网操作相同。
<!-- tabs:end -->

### 编辑配电网 (PDN)
无需下载配电网。对于新创建的案例，会自动添加一个 IEEE 33 节点配电网。您必须在 GUI 的 `Network` 页面中拖动项目以将它们放置在适当的位置。

道路元素为蓝色或彩色，而配电网组件为黑色。

+ 左键单击它们以在右侧边栏中查看其属性。
+ 边栏中显示的属性可以通过双击进行编辑。请注意，并非所有属性都可编辑。
+ 按住鼠标右键可以平移。
+ 按住鼠标左键并平移可以移动元素。

**图例：**
+ 黑线是输电线路。
+ 黑圈是发电机。
+ 黑矩形是母线。
+ 黑方块是储能系统。
+ 黑三角形是风力涡轮机或光伏系统。

目前，无法在 GUI 中添加或删除元素。请直接编辑配电网文件和道路网络文件来实现这一点。

![alt text](../imgs/11.png)
