# 生成车辆
在本主题中，我们将讨论如何生成车辆和行程。

当从 OSMWebWizard 生成案例时，可能会生成 SUMO 行程。然而，V2Sim 无法利用这些行程，因此一旦案例被 V2Sim 打开，这些行程将被***删除***。

## 图形界面版本
我们推荐使用图形界面来生成车辆，因为这种方式简单直观。选择 `车辆` 标签页，即可进入车辆生成页面。

![image](https://github.com/user-attachments/assets/b40b2810-3a28-4546-8b9a-a979a9120cac)

您可以在 `基本信息` 面板中编辑车辆数量、天数、V2G比例和随机种子。
+ 车辆数量：将要生成的车辆（电动汽车）数量
+ 天数：生成行程的天数。每天将为每辆车生成3个行程。**此外，实际使用的天数是输入数字加1！** 例如，如果天数为7，则每辆车将生成8天的行程（总共24个行程）。因为仿真中的第一天通常是异常的，会被忽略。默认的绘图起始时间点也是第二天的开始。
+ V2G比例：愿意参与V2G的车辆比例。请注意，即使电动汽车愿意参与V2G，它也可能不会一直参与V2G。是否放电参与V2G受多种因素影响：V2G收益、时间范围、中央调度命令等。
+ 种子：用于生成的随机种子。如果所有参数（包括种子）完全相同，则程序将生成完全相同的车辆和行程。

中间的属性框显示几个关键参数，这些参数是电动汽车特有的。但是，逐辆车分配这些参数很不方便，因此改用概率分布函数。双击编辑概率分布函数。
+ Omega：描述电动汽车用户单位时间价值的系数
+ KRel：表示电动汽车用户路线长度估计的偏差。估计长度为 KRel × 实际长度
+ KSC：慢速充电的SoC阈值
+ KFC：快速充电的SoC阈值
+ KV2G：V2G放电的SoC阈值
通常，KV2G > KSC > KFC。

底部的单选按钮显示了对OD对来源和寻路缓存的偏好设置。
+ OD对来源有3个选项：交通区域、建筑轮廓和自动
  - 交通分析小区模式需要 `taz_type.txt` 文件和 `*.taz.xml` 文件来指示交通区域功能和所属的边。这些文件通常是在小型案例中手动创建的。
  - 建筑轮廓模式需要 `*.poly.xml(.gz)` 文件来指示建筑物轮廓的多边形。此文件通常由OSMWebWizard生成。
  - 自动模式是根据案例中的文件在交通区域和轮廓之间进行选择。如果条件满足，则优先使用交通区域。
+ 寻路缓存也有3个选项。**请注意寻路缓存有bug，不能正常运作。**

## 命令行版本
有一个用于车辆和行程生成的命令提示符程序，但其功能不全。请参阅[生成行程](/#/zh_hans/v2sim/tools/gen_trip)页面了解详细信息。