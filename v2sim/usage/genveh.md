# Generate Vehicles
In this topic, we will discuss how to generate vehicles and trips. 

When generating a case from OSMWebWizard, SUMO trips may be generated. However, V2Sim cannot utilize these trips and thus it will be ***deleted*** once the case is opened by V2Sim.

## GUI Version
We recommend you to use GUI to generate vehicles since it is easy and intuitive. Select tab `Vehicles`, and you will turn to the vehicle generation page.

![image](https://github.com/user-attachments/assets/b40b2810-3a28-4546-8b9a-a979a9120cac)

You can edit vehicle count, day count, V2G proportion and random seed in the `Basic Information` panel.
+ Vehicle count: Number of vehicles (EV) will be generated.
+ Day count: Number of days for generating trips. 3 trips will be generated for each day. **Besides, the days used is the input number plus one!** For example, if day count is 7, 8 days of trips (24 trips in total) will be generated for each vehicle. Because the first day in the simulation is usually abnormal and will be ignored. Default plotting start time point is also the beginning of the second day.
+ V2G prop: Proportion of vehicles willing to join V2G. Note that an EV may not participate in V2G all the time even if it is willing to join V2G. Wheter to discahrge V2G power is affected by multiple factors: V2G revenue, time range, central dispatch command, etc.
+ Seed: The random seed used for generation. If all the parameters, including the seed, are exactly the same, then the program will generate exactly the same vehicles and trips.

The property box in the middle shows several critical parameters, which are specific to EVs. However, it is inconvenient to assign these parameters vehicle by vehicle. So probability distribution functions (PDF) are employed instead. Double click to edit the PDFs.
+ Omega: A coefficient to describe the value of unit time of the EV user.
+ KRel: It symbols the route length estimation offset of the EV user. The estimated length is KRel Ã— real length.
+ KSC: SoC threshold for slow charging.
+ KFC: Soc threshold for fast charging.
+ KV2G: Soc threshold for V2G dischariging.
Usaully, KV2G > KSC > KFC.

The radio buttons in the bottom shows the preference for OD pair source and routing cache.
+ OD pair source has 3 options: TAZ, Contour, and auto.
  - TAZ mode require a `taz_type.txt` file and a `*.taz.xml` file to indicate the TAZ function and the belonging edges. These files are usually created manually in a small case.
  - Contour modes require a `*.poly.xml(.gz)` file to indicate the polygons of building contours. This file is usually generated by OSMWebWizard.
  - Auto mode is to select between TAZ and Contour, according to the files in the case. TAZ is preferred if condition satisfies.
+ Routing cache also has 3 options. Their pro and cons are shown in the GUI.

## CMD Version
There is a command prompt program for vehicle and trip generation. However, it's not with full function. Please read [gen_trip](gen_trip) page to see the details.